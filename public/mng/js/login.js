function onReady(){}function onFailure(e){console.log(e),pageAlert.showError({title:"登入錯誤",text:e.reason})}function renderButton(){gapi.signin2.render("my-signin2",{scope:"profile email openid",height:50,longtitle:!0,onsuccess:onSignIn,onfailure:onFailure}),renderTimer=setTimeout(checkRenderButton,30)}function checkRenderButton(){$(".abcRioButton").css("width")?$(".abcRioButton").css("width","100%"):renderTimer=setTimeout(checkRenderButton,30)}function onSignIn(e){var n=e.getBasicProfile();console.log("ID: "+n.getId()),console.log("Name: "+n.getName()),console.log("Image URL: "+n.getImageUrl()),console.log("Email: "+n.getEmail());var o=e.getAuthResponse().id_token;console.log("ID Token: "+o),pageAlert.show({title:"登入驗證中",type:"info"});var t=new XMLHttpRequest;t.open("POST","/jason/api/tokensignin"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onload=function(){console.log("Signed in as: "+t.responseText);var e=$.parseJSON(t.responseText);if("OK"!=e.status)signOut(),pageAlert.showError({title:e.message});else{var n=Cookies.get("_path")||vpath+"/mng/users";location.replace(n)}},t.send("idtoken="+o)}function signOut(){var e=gapi.auth2.getAuthInstance();e.signOut().then(function(){console.log("User signed out.")})}$(onReady);var renderTimer=0;
//# sourceMappingURL=../../js/maps/mng/js/login.js.map
